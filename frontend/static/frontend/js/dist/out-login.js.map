{"version":3,"sources":["webpack://wulkanowy-web/./static/frontend/js/login.js"],"names":["button","document","querySelector","login","loginName","value","Password","symbol","diary","diaryUrl","sessionStorage","setItem","data","fetch","url","method","mode","headers","csrfcookie","body","JSON","stringify","then","response","json","myStorage","window","location","href","innerHTML","cookieValue","name","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","addEventListener"],"mappings":"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","file":"out-login.js","sourcesContent":["const button = document.querySelector('#button');\n\nconst login = () => {\n    const loginName = document.querySelector('#id_loginName').value;\n    const Password = document.querySelector('#id_Password').value;\n    const symbol = document.querySelector('#id_Symbol').value;\n    const diary = document.querySelector('#id_diary').value;\n    if(loginName != '' && Password != '' && symbol != ''){\n        switch(diary){\n            case 'Fakelog':\n                var diaryUrl = 'http://cufs.fakelog.cf/';\n                sessionStorage.setItem('diary_url', 'http://cufs.fakelog.cf/');\n                break;\n\n            case 'Vulcan UONET+':\n                var diaryUrl = 'https://cufs.vulcan.net.pl/';\n                sessionStorage.setItem('diary_url', 'https://cufs.vulcan.net.pl/');\n                break;\n        }\n        data = {\n                'loginName': loginName,\n                'Password': Password,\n                'Symbol': symbol,\n                'diaryUrl': diaryUrl\n            }\n        fetch(url = 'api/login', {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-CSRFToken': csrfcookie()\n              },\n            body: JSON.stringify(data)\n        }).then(response => response.json()).then(data => {\n            if(data['success']){\n                myStorage = window.sessionStorage;\n                sessionStorage.setItem('cookies_data', JSON.stringify(data));\n                sessionStorage.setItem('csrfcookie', csrfcookie());\n                sessionStorage.setItem('email', document.querySelector('#id_loginName').value);\n                sessionStorage.setItem('symbol', document.querySelector('#id_Symbol').value);\n                window.location.href = \"/content/\";\n            }\n            else{\n                document.querySelector('#error').innerHTML = 'Nieprawidłowy login, hasło lub symbol';\n            }\n        });\n    }\n};\n\nvar csrfcookie = function() {\n    var cookieValue = null,\n        name = 'csrftoken';\n    if (document.cookie && document.cookie !== '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i < cookies.length; i++) {\n            var cookie = cookies[i].trim();\n            if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n};\n\nbutton.addEventListener('click', login);"],"sourceRoot":""}